<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>TerraceTechフロントエンドエンジニア養成所</title>
  </head>
  <body>
    <div>
      <ul id="js-ul"></ul>
    </div>
    <script src="index.js"></script>
  </body>
</html>
<script>
const ul = document.getElementById('js-ul');

const listData = [
  { to: "bookmark.html", img: "1.png", alt: "画像1", text: "ブックマーク" },
  { to: "message.html", img: "2.png", alt: "画像2", text: "メッセージ" }
];

function addLoading() {
  const loading = document.createElement('img');
  loading.src = "./loading-circle.gif";
  loading.id = "loading";
  ul.appendChild(loading);
}

function removeLoading() {
  const loading = document.getElementById('loading');
  loading.remove();
}

function getData() {
  addLoading();
  return new Promise((resolve) => {
    setTimeout(() => {
      resolve(listData);
    }, 3000);
  });
}

async function createLists() {
  try {
    return await getDat();
  } 
  catch (err) {
    ul.textContent = 'era-!!';
    console.error(err);
  }
  finally {
    removeLoading();
  }
}
async function init(){
  const result = await createLists();
  console.log(result);
  const frag = document.createDocumentFragment();
  result.forEach((data) => {
    const li = document.createElement('li');
    const anchor = document.createElement('a');
    const img = document.createElement('img');
  
    anchor.href = `/${data.to}`;
    img.src = data.img;
    img.alt = data.alt;
  
    frag.appendChild(li).appendChild(anchor).appendChild(img);
    anchor.insertAdjacentHTML('beforeend', data.text);
  });
  ul.appendChild(frag);
}
init();


</script>
</body>
<style>
    body,
      div,
      dl,
      dt,
      dd,
      ul,
      ol,
      li,
      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      pre,
      code,
      form,
      fieldset,
      legend,
      input,
      textarea,
      p,
      blockquote,
      th,
      td {
        margin: 0;
        padding: 0;
      }


</style>
</html>
